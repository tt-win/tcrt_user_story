{% extends "base.html" %}

{% block title %}Ad-hoc Test Run - Test Case Repository Web Tool{% endblock %}

{% block page_title_text %}Ad-Hoc Test Run{% endblock %}
{% block page_subtitle_text %}<span id="runNameDisplay" data-i18n="common.loading">Loading...</span>{% endblock %}

{% block page_specific_actions %}
<div class="d-flex gap-2 align-items-center">
    <button type="button" class="btn btn-success" id="convertBtn">
        <i class="fas fa-file-import me-2"></i><span data-i18n="adhoc.convertToTestCase">Convert to Test Case</span>
    </button>
    <button type="button" class="btn btn-info d-none" id="rerunBtn">
        <i class="fas fa-redo me-2"></i><span data-i18n="adhoc.rerun">Re-run</span>
    </button>
    <button type="button" class="btn btn-primary" id="reportsBtn">
        <i class="fas fa-chart-pie me-2"></i><span data-i18n="testRun.chartsReports">Charts & Reports</span>
    </button>
    <a id="backToMgmtBtn" href="#" class="btn btn-secondary">
        <i class="fas fa-arrow-left me-2"></i><span data-i18n="testRun.backToManagement">Back to Management</span>
    </a>
    <a href="/" class="btn btn-secondary">
        <i class="fas fa-home me-2"></i><span data-i18n="navigation.backToHome">首頁</span>
    </a>
</div>
{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable@14.3.0/dist/handsontable.full.min.css" />
<link rel="stylesheet" href="/static/css/adhoc-test-run-execution.css">
{% endblock %}

{% block content %}
<div class="adhoc-wrapper">
    <!-- Toolbar -->
    <div class="adhoc-toolbar">
        <div class="d-flex gap-2">
            <button class="btn btn-sm btn-primary" id="addRowBtn">
                <i class="fas fa-plus me-1"></i> Add Row
            </button>
        </div>
        <div class="d-flex align-items-center gap-2">
            <span id="saveStatus" class="text-muted small" style="font-size: 0.75rem;">All changes saved</span>
        </div>
    </div>

    <!-- Grid -->
    <div class="adhoc-grid-container">
        <div id="adhocGrid"></div>
    </div>

    <!-- Bottom Sheet Bar -->
    <div class="adhoc-sheet-bar">
        <button class="sheet-add-btn" id="addSheetBtn" title="Add Sheet">
            <i class="fas fa-plus"></i>
        </button>
        <div class="sheet-tabs-container" id="sheetTabsContainer">
            <!-- Tabs will be populated here -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/handsontable@14.3.0/dist/handsontable.full.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/Chart.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="/static/js/adhoc_test_run.js"></script>
{% endblock %}
