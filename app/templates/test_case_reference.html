{% extends "base.html" %}

{% block title %}{{ i18n.t('testCase.referenceTestCasePopupTitle') if i18n else '參考測試案例' }} - Test Case Repository Web Tool{% endblock %}

{% block head %}
<link rel="stylesheet" href="/static/css/test-case-reference.css">
{% endblock %}

{% block page_title_text %}<span data-i18n="testCase.referenceTestCasePopupTitle">參考測試案例</span>{% endblock %}
{% block page_subtitle_text %}{% endblock %}
{% block page_specific_actions %}
<button type="button" class="btn btn-secondary btn-sm" onclick="window.close()">
  <i class="fas fa-times me-1"></i><span data-i18n="common.close">關閉</span>
</button>
{% endblock %}

{% block content %}
<div id="referencePageRoot" class="container-fluid">
  <div class="d-flex h-100">
    <!-- 左側搜尋區域 -->
    <div class="border-end" style="width: 400px; flex-shrink: 0;">
      <div class="p-3 border-bottom">
        <div class="mb-3">
          <label class="form-label" data-i18n="testCase.referenceTestCaseSearch">搜尋參考測試案例</label>
          <input type="text" class="form-control" id="referenceSearchInputPage" 
                 data-i18n-placeholder="testCase.referenceTestCaseSearchPlaceholder"
                 placeholder="輸入測試案例編號或標題...">
        </div>
        <div class="text-muted small" data-i18n="testCase.selectReferenceTestCase">選擇一個測試案例進行參考</div>
      </div>
      <!-- 搜尋結果列表 -->
      <div class="reference-results-container">
        <div id="referenceSearchResultsPage" class="p-3">
          <div class="text-center text-muted" id="referenceInitialMessagePage">
            <i class="fas fa-search fa-2x mb-2"></i>
            <div data-i18n="testCase.selectReferenceTestCase">選擇一個測試案例進行參考</div>
          </div>
          <div class="text-center" id="referenceLoadingMessagePage" style="display: none;">
            <i class="fas fa-spinner fa-spin fa-2x mb-2"></i>
            <div data-i18n="testCase.loadingReferenceTestCases">載入參考測試案例中...</div>
          </div>
          <div class="text-center text-muted" id="referenceNoResultsMessagePage" style="display: none;">
            <i class="fas fa-exclamation-triangle fa-2x mb-2"></i>
            <div data-i18n="testCase.noReferenceTestCases">找不到符合條件的測試案例</div>
          </div>
        </div>
      </div>
    </div>
    <!-- 右側顯示區域 -->
    <div class="flex-grow-1" style="position: relative;">
      <div id="referenceDisplayAreaPage" class="h-100" style="position: relative;">
        <div id="referencePlaceholderPage" class="d-flex align-items-center justify-content-center h-100 text-muted" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 1;">
          <div class="text-center">
            <i class="fas fa-eye fa-3x mb-3"></i>
            <h5 data-i18n="testCase.selectReferenceTestCase">選擇一個測試案例進行參考</h5>
          </div>
        </div>
        <iframe id="referenceTestCaseFramePage" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; display: none; z-index: 2;"></iframe>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/test-case-reference.js"></script>
{% endblock %}
