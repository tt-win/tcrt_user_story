/* 全局字型設定 */
:root {
    --font-sans: 'Noto Sans', 'Noto Sans CJK TC', sans-serif;
    --font-condensed: 'Noto Sans Condensed', 'Noto Sans CJK TC', sans-serif;
}

body {
    font-family: var(--font-sans) !important;
}

/* Test Case Number 使用 Noto Sans Condensed */
.test-case-number,
[class*="case-number"],
[class*="test-number"] {
    font-family: var(--font-condensed) !important;
}

/* 緊湊設計系統 */

/* 僅在所屬分頁為 active 時顯示標記了 data-role="tab-only" 的區塊 */
.tab-pane:not(.active) [data-role="tab-only"] {
    display: none !important;
}

/* 測試案例 Diff 專用樣式 */
#tcDiffContainer .diff-value {
    white-space: pre-wrap;
}
#tcDiffBulkActions {
    flex-wrap: nowrap;
}
#tcDiffBulkActions .btn {
    white-space: nowrap;
}
.btn {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.875rem !important;
    line-height: 1.4 !important;
}

/* 更小的按鈕樣式 */
.btn-xs {
    padding: 0.125rem 0.375rem !important;
    font-size: 0.75rem !important;
    line-height: 1.3 !important;
}

/* TestRail 色彩系統 - 保留 */
:root {
    /* TestRail 色彩系統 */
    --tr-primary-rgb: 74, 144, 226;
    --tr-primary: #4a90e2;
    --tr-primary-dark: #357abd;
    --tr-primary-light: #e3f2fd;
    --tr-secondary: #7b68ee;
    --tr-secondary-dark: #5a4fcf;
    --tr-secondary-light: #f3f0ff;
    --tr-success: #5cb85c;
    --tr-success-dark: #449d44;
    --tr-success-light: #dff0d8;
    --tr-warning: #f0ad4e;
    --tr-warning-dark: #ec971f;
    --tr-warning-light: #fcf8e3;
    --tr-danger: #d9534f;
    --tr-danger-dark: #c9302c;
    --tr-danger-light: #f2dede;
    --tr-info: #5bc0de;
    --tr-info-dark: #31b0d5;
    --tr-info-light: #d9edf7;

    /* 背景色系 */
    --tr-bg-body: #f8f9fa;
    --tr-bg-header: #ffffff;
    --tr-bg-sidebar: #f5f6f7;
    --tr-bg-content: #ffffff;
    --tr-bg-card: #ffffff;
    --tr-bg-light: #f8f9fa;

    /* 邊框色系 */
    --tr-border: #dee2e6;
    --tr-border-light: #e1e5e9;
    --tr-border-medium: #d1d5d9;
    --tr-border-dark: #adb5bd;

    /* 文字色系 */
    --tr-text-primary: #212529;
    --tr-text-secondary: #6c757d;
    --tr-text-muted: #868e96;
    --tr-text-light: #adb5bd;

    /* 陰影 */
    --tr-shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
    --tr-shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
    --tr-shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);

    /* Button tokens */
    --btn-border-width: 2px;
    --btn-radius: 6px;
    --btn-font-weight: 500;
    --btn-disabled-bg: var(--tr-border-light);
    --btn-disabled-border: var(--tr-border-light);
    --btn-disabled-color: var(--tr-text-muted);

    --btn-primary-bg: transparent;
    --btn-primary-border: var(--tr-primary);
    --btn-primary-color: var(--tr-primary);
    --btn-primary-hover-bg: linear-gradient(135deg, var(--tr-primary) 0%, #5ba0f2 100%);
    --btn-primary-hover-border: var(--tr-primary);
    --btn-primary-hover-color: #ffffff;
    --btn-primary-active-bg: linear-gradient(135deg, var(--tr-primary-dark) 0%, #4a8fd1 100%);
    --btn-primary-active-border: var(--tr-primary-dark);
    --btn-primary-shadow: 0 0 0 0.2rem rgba(74, 144, 226, 0.25);

    --btn-secondary-bg: transparent;
    --btn-secondary-border: #8e9aaf;
    --btn-secondary-color: #8e9aaf;
    --btn-secondary-hover-bg: linear-gradient(135deg, #8e9aaf 0%, #a8b4c8 100%);
    --btn-secondary-hover-border: #8e9aaf;
    --btn-secondary-hover-color: #ffffff;
    --btn-secondary-active-bg: linear-gradient(135deg, #7f8a9e 0%, #9aa6ba 100%);
    --btn-secondary-active-border: #7f8a9e;
    --btn-secondary-shadow: 0 0 0 0.2rem rgba(142, 154, 175, 0.3);

    --btn-success-bg: transparent;
    --btn-success-border: var(--tr-success);
    --btn-success-color: var(--tr-success);
    --btn-success-hover-bg: linear-gradient(135deg, var(--tr-success) 0%, #6dc86d 100%);
    --btn-success-hover-border: var(--tr-success);
    --btn-success-hover-color: #ffffff;
    --btn-success-active-bg: linear-gradient(135deg, var(--tr-success-dark) 0%, #5cb85c 100%);
    --btn-success-active-border: var(--tr-success-dark);
    --btn-success-shadow: 0 0 0 0.2rem rgba(92, 184, 92, 0.25);

    --btn-warning-bg: transparent;
    --btn-warning-border: var(--tr-warning);
    --btn-warning-color: var(--tr-warning);
    --btn-warning-hover-bg: linear-gradient(135deg, var(--tr-warning) 0%, #f5b868 100%);
    --btn-warning-hover-border: var(--tr-warning);
    --btn-warning-hover-color: #ffffff;
    --btn-warning-active-bg: linear-gradient(135deg, var(--tr-warning-dark) 0%, #f0ad4e 100%);
    --btn-warning-active-border: var(--tr-warning-dark);
    --btn-warning-shadow: 0 0 0 0.2rem rgba(240, 173, 78, 0.25);

    --btn-danger-bg: transparent;
    --btn-danger-border: #b85450;
    --btn-danger-color: #b85450;
    --btn-danger-hover-bg: linear-gradient(135deg, #b85450 0%, #c96a66 100%);
    --btn-danger-hover-border: #b85450;
    --btn-danger-hover-color: #ffffff;
    --btn-danger-active-bg: linear-gradient(135deg, #a94a46 0%, #be605c 100%);
    --btn-danger-active-border: #a94a46;
    --btn-danger-shadow: 0 0 0 0.2rem rgba(184, 84, 80, 0.25);

    --btn-info-bg: transparent;
    --btn-info-border: var(--tr-info);
    --btn-info-color: var(--tr-info);
    --btn-info-hover-bg: linear-gradient(135deg, var(--tr-info) 0%, #6fd4e8 100%);
    --btn-info-hover-border: var(--tr-info);
    --btn-info-hover-color: #ffffff;
    --btn-info-active-bg: linear-gradient(135deg, var(--tr-info-dark) 0%, #5bc0de 100%);
    --btn-info-active-border: var(--tr-info-dark);
    --btn-info-shadow: 0 0 0 0.2rem rgba(91, 192, 222, 0.25);
}

/* 基礎重置 */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family:
        -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue",
        Arial, sans-serif;
    font-size: 14px;
    line-height: 1.5;
    color: var(--tr-text-primary);
    background-color: var(--tr-bg-body);
}

/* 基礎容器 - 緊湊設計 */
.container-fluid {
    max-width: 100%;
    padding: 0.75rem; /* 減少內邊距 */
}

/* 基礎按鈕樣式 */
.btn {
    border-radius: var(--btn-radius);
    border-style: solid;
    border-width: var(--btn-border-width);
    border-color: var(--btn-border, var(--tr-border));
    background: var(--btn-bg, transparent);
    color: var(--btn-color, var(--tr-text-primary));
    font-weight: var(--btn-font-weight);
    text-decoration: none;
    transition: all 0.2s ease;
    box-shadow: none;
}

a.btn:hover,
a.btn:focus,
a.btn:active {
    text-decoration: none;
}

.btn-close {
    border: none;
}

.btn-icon-only {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
    border: none;
    background: none;
    color: var(--tr-text-secondary);
    padding: 0;
    margin-left: 8px;
    line-height: 1;
    cursor: pointer;
    transition: color 0.2s ease;
}

.btn-icon-only:hover,
.btn-icon-only:focus {
    color: var(--tr-primary);
    outline: none;
}

.btn-icon-only:active {
    color: var(--tr-primary-dark);
}

.btn:focus,
.btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(var(--tr-primary-rgb), 0.25);
}

.btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.btn:disabled,
.btn.disabled,
.btn[aria-disabled="true"] {
    background: var(--btn-disabled-bg);
    border-color: var(--btn-disabled-border);
    color: var(--btn-disabled-color);
    box-shadow: none;
    transform: none;
    cursor: not-allowed;
    opacity: 1;
    pointer-events: none;
}

.btn:disabled:hover,
.btn.disabled:hover,
.btn[aria-disabled="true"]:hover {
    transform: none;
    box-shadow: none;
}

.btn[data-loading="true"],
.btn.is-loading {
    cursor: wait;
    pointer-events: none;
    transform: none;
    box-shadow: none;
    opacity: 0.75;
}

.btn .loading-spinner,
.btn .spinner-border,
.btn .spinner-grow,
.btn [data-role="loading-spinner"] {
    width: 1rem;
    height: 1rem;
}

/* 主要操作按鈕 - 藍色系 */
.btn-primary {
    background: var(--btn-primary-bg);
    border-color: var(--btn-primary-border);
    color: var(--btn-primary-color);
}

.btn-primary:hover {
    background: var(--btn-primary-hover-bg);
    border-color: var(--btn-primary-hover-border);
    color: var(--btn-primary-hover-color);
}

.btn-primary:focus,
.btn-primary:active {
    background: var(--btn-primary-active-bg);
    border-color: var(--btn-primary-active-border);
    color: #ffffff;
    box-shadow: var(--btn-primary-shadow);
}

/* 次要操作按鈕 - 灰藍色系 */
.btn-secondary {
    background: var(--btn-secondary-bg);
    border-color: var(--btn-secondary-border);
    color: var(--btn-secondary-color);
}

.btn-secondary:hover {
    background: var(--btn-secondary-hover-bg);
    border-color: var(--btn-secondary-hover-border);
    color: var(--btn-secondary-hover-color);
}

.btn-secondary:focus,
.btn-secondary:active {
    background: var(--btn-secondary-active-bg);
    border-color: var(--btn-secondary-active-border);
    color: #ffffff;
    box-shadow: var(--btn-secondary-shadow);
}

/* 檢視操作按鈕 - 冷灰藍色系 */
.btn-view {
    background: var(--btn-secondary-bg);
    border-color: var(--btn-secondary-border);
    color: var(--btn-secondary-color);
}

.btn-view:hover {
    background: var(--btn-secondary-hover-bg);
    border-color: var(--btn-secondary-hover-border);
    color: var(--btn-secondary-hover-color);
}

/* 編輯操作按鈕 - 中性藍灰色系 */
.btn-edit {
    background: var(--btn-secondary-bg);
    border-color: var(--btn-secondary-border);
    color: var(--btn-secondary-color);
}

.btn-edit:hover {
    background: var(--btn-secondary-hover-bg);
    border-color: var(--btn-secondary-hover-border);
    color: var(--btn-secondary-hover-color);
}

/* 危險操作按鈕 - 低飽和度紅色系 */
.btn-danger {
    background: var(--btn-danger-bg);
    border-color: var(--btn-danger-border);
    color: var(--btn-danger-color);
}

.btn-danger:hover {
    background: var(--btn-danger-hover-bg);
    border-color: var(--btn-danger-hover-border);
    color: var(--btn-danger-hover-color);
}

.btn-danger:focus,
.btn-danger:active {
    background: var(--btn-danger-active-bg);
    border-color: var(--btn-danger-active-border);
    color: #ffffff;
    box-shadow: var(--btn-danger-shadow);
}

/* 成功操作按鈕 - 綠色系 */
.btn-success {
    background: var(--btn-success-bg);
    border-color: var(--btn-success-border);
    color: var(--btn-success-color);
}

.btn-success:hover {
    background: var(--btn-success-hover-bg);
    border-color: var(--btn-success-hover-border);
    color: var(--btn-success-hover-color);
}

.btn-success:focus,
.btn-success:active {
    background: var(--btn-success-active-bg);
    border-color: var(--btn-success-active-border);
    color: #ffffff;
    box-shadow: var(--btn-success-shadow);
}

/* 警告操作按鈕 - 橙色系 */
.btn-warning {
    background: var(--btn-warning-bg);
    border-color: var(--btn-warning-border);
    color: var(--btn-warning-color);
}

.btn-warning:hover {
    background: var(--btn-warning-hover-bg);
    border-color: var(--btn-warning-hover-border);
    color: var(--btn-warning-hover-color);
}

.btn-warning:focus,
.btn-warning:active {
    background: var(--btn-warning-active-bg);
    border-color: var(--btn-warning-active-border);
    color: #ffffff;
    box-shadow: var(--btn-warning-shadow);
}

/* 資訊操作按鈕 - 青色系 */
.btn-info {
    background: var(--btn-info-bg);
    border-color: var(--btn-info-border);
    color: var(--btn-info-color);
}

.btn-info:hover {
    background: var(--btn-info-hover-bg);
    border-color: var(--btn-info-hover-border);
    color: var(--btn-info-hover-color);
}

.btn-info:focus,
.btn-info:active {
    background: var(--btn-info-active-bg);
    border-color: var(--btn-info-active-border);
    color: #ffffff;
    box-shadow: var(--btn-info-shadow);
}

.btn-outline-primary {
    background: transparent;
    border-color: var(--btn-primary-border);
    color: var(--btn-primary-border);
}

.btn-outline-primary:hover,
.btn-outline-primary:focus,
.btn-outline-primary:active {
    background: var(--btn-primary-hover-bg);
    border-color: var(--btn-primary-hover-border);
    color: var(--btn-primary-hover-color);
    box-shadow: var(--btn-primary-shadow);
}

.btn-outline-secondary {
    background: transparent;
    border-color: var(--btn-secondary-border);
    color: var(--btn-secondary-border);
}

.btn-outline-secondary:hover,
.btn-outline-secondary:focus,
.btn-outline-secondary:active {
    background: var(--btn-secondary-hover-bg);
    border-color: var(--btn-secondary-hover-border);
    color: var(--btn-secondary-hover-color);
    box-shadow: var(--btn-secondary-shadow);
}

.btn-outline-success {
    background: transparent;
    border-color: var(--btn-success-border);
    color: var(--btn-success-border);
}

.btn-outline-success:hover,
.btn-outline-success:focus,
.btn-outline-success:active {
    background: var(--btn-success-hover-bg);
    border-color: var(--btn-success-hover-border);
    color: var(--btn-success-hover-color);
    box-shadow: var(--btn-success-shadow);
}

.btn-outline-warning {
    background: transparent;
    border-color: var(--btn-warning-border);
    color: var(--btn-warning-border);
}

.btn-outline-warning:hover,
.btn-outline-warning:focus,
.btn-outline-warning:active {
    background: var(--btn-warning-hover-bg);
    border-color: var(--btn-warning-hover-border);
    color: var(--btn-warning-hover-color);
    box-shadow: var(--btn-warning-shadow);
}

.btn-outline-danger {
    background: transparent;
    border-color: var(--btn-danger-border);
    color: var(--btn-danger-border);
}

.btn-outline-danger:hover,
.btn-outline-danger:focus,
.btn-outline-danger:active {
    background: var(--btn-danger-hover-bg);
    border-color: var(--btn-danger-hover-border);
    color: var(--btn-danger-hover-color);
    box-shadow: var(--btn-danger-shadow);
}

.btn-outline-info {
    background: transparent;
    border-color: var(--btn-info-border);
    color: var(--btn-info-border);
}

.btn-outline-info:hover,
.btn-outline-info:focus,
.btn-outline-info:active {
    background: var(--btn-info-hover-bg);
    border-color: var(--btn-info-hover-border);
    color: var(--btn-info-hover-color);
    box-shadow: var(--btn-info-shadow);
}

.btn-outline-primary:disabled,
.btn-outline-secondary:disabled,
.btn-outline-success:disabled,
.btn-outline-warning:disabled,
.btn-outline-danger:disabled,
.btn-outline-info:disabled,
.btn-outline-primary.disabled,
.btn-outline-secondary.disabled,
.btn-outline-success.disabled,
.btn-outline-warning.disabled,
.btn-outline-danger.disabled,
.btn-outline-info.disabled {
    background: transparent;
}

/* AI assist modal: reserve space for status row to avoid layout shift */
#aiAssistModal .ai-assist-status {
    min-height: 1.5rem;
}

/* AI assist modal: emphasize frame to separate from background */
#aiAssistModal .modal-content {
    border: 2px solid var(--tr-primary);
    box-shadow: 0 18px 40px rgba(15, 23, 42, 0.35);
}

#aiAssistModal .modal-dialog {
    max-width: 1400px;
    width: min(96vw, 1400px);
}

#aiAssistModal .ai-assist-grid-header {
    padding-bottom: 0.25rem;
    border-bottom: 1px solid var(--tr-border-light);
    margin-bottom: 0.75rem;
}

#aiAssistModal .ai-assist-col-title {
    font-size: 0.72rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--tr-text-muted);
    font-weight: 600;
}

#aiAssistModal .ai-assist-grid-row {
    padding: 0.6rem;
    border: 1px solid var(--tr-border-light);
    border-radius: 12px;
    background: linear-gradient(180deg, rgba(248, 249, 250, 0.85), rgba(255, 255, 255, 0.95));
}

#aiAssistModal .ai-assist-grid-row + .ai-assist-grid-row {
    margin-top: 0.75rem;
}

#aiAssistModal .ai-assist-field-check {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    padding-top: 0.35rem;
}

#aiAssistModal .ai-assist-field-check .form-check-label {
    font-size: 0.85rem;
    white-space: nowrap;
}

#aiAssistModal {
    --ai-assist-panel-height: 220px;
}

#aiAssistModal .ai-assist-preview {
    height: var(--ai-assist-panel-height);
    min-height: var(--ai-assist-panel-height);
    max-height: var(--ai-assist-panel-height);
    overflow-y: auto;
    padding: 0.6rem 0.75rem;
    border: 1px solid var(--tr-border-light);
}

#aiAssistModal .ai-assist-original,
#aiAssistModal .ai-assist-revised {
    height: var(--ai-assist-panel-height);
    min-height: var(--ai-assist-panel-height);
    max-height: var(--ai-assist-panel-height);
    resize: none;
}

#aiAssistModal .ai-assist-suggestions-panel {
    min-height: 160px;
    max-height: 240px;
    overflow-y: auto;
}

/* 基礎卡片樣式 */
.card {
    border: 1px solid var(--tr-border-light);
    border-radius: 8px;
    box-shadow: var(--tr-shadow-sm);
    background-color: var(--tr-bg-card);
}

/* 基礎表格樣式 */
.table {
    margin-bottom: 0;
    color: var(--tr-text-primary);
}

.table th {
    border-bottom: 2px solid var(--tr-border-light);
    font-weight: 600;
    background-color: var(--tr-bg-sidebar);
    color: var(--tr-text-secondary);
    vertical-align: middle;
    padding: 0.75rem;
}

.table td {
    border-bottom: 1px solid var(--tr-border-light);
    vertical-align: middle;
    padding: 0.75rem;
}

.table-hover tbody tr:hover {
    background-color: var(--tr-bg-sidebar);
}

/* Flash Messages */
#flash-messages {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 1060;
    max-width: 400px;
}

.alert {
    border-radius: 6px;
    margin-bottom: 0.5rem;
    box-shadow: var(--tr-shadow-md);
    border: 1px solid var(--tr-border-light);
}

.alert-success {
    background-color: #d4edda;
    color: var(--tr-success);
    border-color: var(--tr-success);
}

.alert-danger {
    background-color: #f8d7da;
    color: var(--tr-danger);
    border-color: var(--tr-danger);
}

.alert-warning {
    background-color: #fff3cd;
    color: var(--tr-warning);
    border-color: var(--tr-warning);
}

.alert-info {
    background-color: #cce8f4;
    color: var(--tr-info);
    border-color: var(--tr-info);
}

/* 文字顏色工具類 */
.text-primary {
    color: var(--tr-primary) !important;
}
.text-secondary {
    color: var(--tr-text-secondary) !important;
}
.text-muted {
    color: var(--tr-text-muted) !important;
}
.text-success {
    color: var(--tr-success) !important;
}
.text-danger {
    color: var(--tr-danger) !important;
}
.text-warning {
    color: var(--tr-warning) !important;
}
.text-info {
    color: var(--tr-info) !important;
}

/* Test Case Number 樣式 */
code.small {
    color: #495057 !important; /* 較深的灰色 */
    background-color: transparent !important;
    font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace;
    font-weight: 500;
    white-space: nowrap !important; /* 防止換行 */
}

/* Test Case Number 欄位不換行 - 確保足夠寬度顯示完整 TCG 號碼 */
#testCasesTable tbody td[data-field="test_case_number"] {
    white-space: nowrap !important;
    min-width: 180px !important;
    max-width: 200px !important;
    width: 190px !important;
}

#sectionListSidebarCol {
    display: flex;
    flex-direction: column;
    min-height: 0;
    height: 100%;
    align-self: stretch;
    padding-bottom: 0;
    padding-top: 0.15rem;
}

.section-list-panel {
    flex: 1 1 auto;
    min-height: 0;
    height: 100%;
    display: flex;
    flex-direction: column;
    margin-bottom: 0;
}

.section-list-content {
    flex: 1 1 auto;
    min-height: 0;
    overflow-y: auto;
    padding: 0.25rem 0.35rem;
}

.section-list-footer {
    margin-top: auto;
}

/* Section list 樣式 */
.section-item {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    flex-wrap: nowrap;
    padding: 0.25rem 0.35rem !important;
    margin-bottom: 0.15rem !important;
    font-size: 0.9rem;
}

.section-item .section-name {
    flex: 1 1 auto;
    min-width: 0;
    font-size: 0.8rem;
}

.section-item input.form-control {
    flex: 1 1 auto;
    min-width: 140px;
    max-width: 100%;
    width: auto;
}

.section-item .badge {
    flex: 0 0 auto;
    font-size: 0.65rem;
    padding: 0.125rem 0.35rem;
}

.section-list-panel .card-header,
.section-list-panel .card-footer {
    padding: 0.4rem 0.5rem;
}

.section-list-panel .card-header h6 {
    font-size: 0.95rem;
    margin: 0;
}

.section-list-panel .card-footer .btn {
    padding: 0.3rem 0.45rem;
    font-size: 0.8rem;
}

.section-list-content ul {
    margin: 0;
    padding-left: 0;
}

.section-list-content .section-node {
    margin-bottom: 0.1rem;
}

.section-list-content .section-node > .section-item {
    font-size: 0.8rem;
}

.section-list-content .section-node .section-item i {
    font-size: 0.8rem;
}

/* Test Case 資料列樣式 */
#testCasesTable tbody tr {
    color: #495057 !important; /* 整個資料列使用較深的灰色 */
}

#testCasesTable tbody td {
    color: #495057 !important; /* 確保所有資料單元格使用較深的灰色 */
    vertical-align: middle !important; /* 強制垂直對齊 */
    padding: 0.25rem 0.5rem !important; /* 更小的內邊距 */
    height: 2rem !important; /* 更密集的行高 */
}

#testCasesTable thead th {
    vertical-align: middle !important; /* 表頭也要垂直對齊 */
    padding: 0.75rem !important; /* 統一內邊距 */
}

/* 確保日期欄位也使用深灰色 */
#testCasesTable tbody td .text-muted {
    color: #495057 !important; /* 覆蓋 text-muted 的顏色 */
}

/* 分離式操作按鈕樣式 */
.test-case-actions {
    display: flex;
    gap: 4px;
    align-items: center;

    justify-content: center;
    height: 100%;
}

.test-case-actions .btn {
    border-radius: 4px !important; /* 四方形圓角 */
    min-width: 32px;
    height: 32px;
    padding: 0 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* TCG 標籤樣式 */
.tcg-tag {
    background-color: #f8f9fa !important;
    color: #495057 !important;
    border: 1px solid #dee2e6 !important;
    font-size: 0.75rem !important;
    font-weight: 500 !important;
    padding: 0.125rem 0.25rem !important; /* 減少右側內邊距 */
    border-radius: 0.25rem !important;
    margin: 0 !important; /* 移除外邊距 */
    display: inline-block; /* 改回 inline-block */
    line-height: 1;
    height: auto !important; /* 自動高度 */
    vertical-align: middle; /* 垂直對齊 */
    white-space: nowrap; /* 防止內容換行 */
    box-sizing: border-box; /* 確保邊框計算正確 */
    font-family: "Monaco", "Menlo", "Ubuntu Mono", monospace; /* 使用等寬字體 */
    letter-spacing: 0; /* 移除字母間距 */
}

.tcg-tag:hover {
    background-color: #e9ecef !important;
    border-color: #adb5bd !important;
}

/* TCG 編輯區域 */
.tcg-edit-area {
    cursor: pointer;
    min-height: 1.5rem; /* 最小高度，允許內容撐開 */
    display: inline-flex; /* 改為 inline-flex 讓寬度自適應內容 */
    align-items: center;
    justify-content: flex-start;
    flex-wrap: nowrap;
    gap: 0.25rem;
    padding: 0; /* 移除內邊距，與標頭對齊 */
    border-radius: 0.375rem;
    transition: all 0.2s ease;
    width: auto; /* 改為自動寬度 */
    white-space: nowrap;
    overflow: visible; /* 允許標籤顯示 */
}

/* TCG 編輯時的表格單元格固定高度 */
#testCasesTable tbody td[data-field="tcg"] {
    height: 2rem !important; /* 與其他單元格一致 */
    vertical-align: middle !important;
    padding: 0.25rem 0.5rem !important; /* 與其他單元格一致 */
    white-space: nowrap !important; /* 防止換行 */
    min-width: 80px !important; /* 縮小最小寬度 */
    width: auto !important; /* 自動寬度，根據內容調整 */
}

/* TCG 編輯時容器固定高度 */
#testCasesTable tbody td[data-field="tcg"].editing {
    height: 2rem !important; /* 編輯時也保持一致高度 */
    vertical-align: middle !important;
    padding: 0.25rem 0.5rem !important; /* 與其他單元格一致 */
    overflow: visible !important; /* 允許下拉選單顯示 */
}

.tcg-edit-area:hover {
    background-color: rgba(0, 123, 255, 0.05);
}

.tcg-edit-area.editing {
    background-color: #fff;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
}

/* TCG 編輯下拉選單 - 移除藍框避免行高變化 */
.tcg-dropdown {
    position: fixed !important;
    z-index: 9999 !important;
    background: white !important;
    border: 1px solid #dee2e6 !important;
    border-radius: 0.375rem;
    box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.1) !important;
    max-height: 200px;
    overflow-y: auto;
    display: block !important;
    min-width: 300px;
}

.tcg-dropdown-item {
    padding: 0.25rem 0.75rem;
    cursor: pointer;
    border-bottom: 1px solid #f8f9fa;
    transition: background-color 0.15s ease;
    font-size: 0.875rem;
    color: #212529;
    line-height: 1.2;
}

.tcg-dropdown-item:hover {
    background-color: #e3f2fd !important;
    color: #0d47a1;
}

.tcg-dropdown-item:last-child {
    border-bottom: none;
}

/* TCG 搜尋輸入框 */
.tcg-search-input {
    border: 1px solid #dee2e6 !important;
    outline: none !important;
    box-shadow: none !important;
    background: transparent;
    font-size: 0.875rem;
    padding: 0.25rem 0.5rem;
    width: 150px;
    min-width: 100px;
}

.tcg-search-input:focus {
    border: 1px solid #dee2e6 !important;
    outline: none !important;
    box-shadow: none !important;
}

/* 緊湊設計 - 卡片 */
.card {
    margin-bottom: 0.75rem !important;
}

.card-body {
    padding: 0.75rem !important;
}

.card-header {
    padding: 0.5rem 0.75rem !important;
}

/* 緊湊設計 - 表單元素 */
.form-control,
.form-select {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.875rem !important;
    line-height: 1.4 !important;
    border: 1px solid var(--tr-border-light);
}

.form-label {
    margin-bottom: 0.25rem !important;
    font-weight: 500 !important;
    font-size: 0.875rem !important;
}

/* 輸入群組緊湊樣式 */
.input-group {
    margin-bottom: 0.75rem !important;
}

/* Modal緊湊樣式 */
.modal-header {
    padding: 0.75rem 1rem !important;
}

.modal-body {
    padding: 1rem !important;
}

.modal-footer {
    padding: 0.75rem 1rem !important;
}

.modal-title {
    font-size: 1.1rem !important;
}

/* 表格緊湊樣式 */
.table th {
    padding: 0.75rem !important;
    font-size: 0.875rem !important;
}

.table td {
    padding: 0.75rem !important;
    font-size: 0.875rem !important;
}

/* 行距緊湊化 */
.mb-3 {
    margin-bottom: 0.75rem !important;
}

.mb-4 {
    margin-bottom: 1rem !important;
}

.mt-3 {
    margin-top: 0.75rem !important;
}

.mt-4 {
    margin-top: 1rem !important;
}

/* 間距調整 */
.row {
    margin: 0 -0.375rem !important;
}

.row > * {
    padding: 0 0.375rem !important;
}

/* 導航和分頁緊湊樣式 */
.pagination {
    margin-bottom: 0.5rem !important;
}

/* Modal 中的 TCG 編輯區域 - 防止藍框影響高度 */
#testCaseModal #modalTCGContainer.tcg-modal-edit-area.editing {
    min-height: 38px !important;
    max-height: 38px !important;
    overflow: visible !important;
    position: relative !important;
    border: 1px solid #ced4da !important;
}

/* Modal 中的 TCG 搜尋框 - 移除藍框，使用淡色邊框 */
#testCaseModal #modalTCGContainer .form-control.tcg-modal-search-input:focus,
#testCaseModal #modalTCGContainer .tcg-modal-search-input.form-control:focus {
    border-color: #ced4da !important;
    box-shadow: none !important;
    outline: none !important;
}

/* Modal 中的 TCG 搜尋框 - 確保高度一致，移除預設樣式 */
#testCaseModal #modalTCGContainer .form-control.tcg-modal-search-input,
#testCaseModal #modalTCGContainer .tcg-modal-search-input.form-control {
    height: 36px !important;
    border: 1px solid #ced4da !important;
    box-shadow: none !important;
}

/* Modal 中的 TCG 下拉選單 - 確保絕對定位不影響父容器 */
#testCaseModal #modalTCGContainer .tcg-modal-dropdown {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1060 !important;
    margin-top: 1px !important;
}

/* 固定包含 TCG 編輯區域的整個 row 高度 */
#testCaseModal .fixed-section .row {
    min-height: 65px !important;
    align-items: flex-start !important;
}

/* 強制設定 Test Case Number 表格標題和儲存格寬度 */
table th:nth-child(2),
table td:nth-child(2) {
    width: 190px !important;
    max-width: 200px !important;
    min-width: 180px !important;
}

/* 更具體的選擇器 */
.table th:nth-child(2),
.table td:nth-child(2) {
    width: 190px !important;
    max-width: 200px !important;
    min-width: 180px !important;
}

.page-link {
    padding: 0.375rem 0.5rem !important;
    font-size: 0.875rem !important;
}

/* 固定分頁欄（可複用，與語言切換按鈕相同定位模型） */
.fixed-pagination-bar {
    position: fixed;
    left: 0;
    right: 0;
    bottom: calc(var(--footer-height) + 1.5rem);
    z-index: 1040; /* 低於語言切換按鈕 (1070) */
    background-color: transparent;
    padding: 0.25rem 0.75rem;
    border-top: none;
    pointer-events: none; /* 讓容器不攔截點擊事件 */
}
.fixed-pagination-bar .pagination {
    margin-bottom: 0 !important;
    pointer-events: auto; /* 只有分頁控制本身可以點擊 */
    z-index: 1039 !important; /* 確保低於語言選擇器 (1070) */
    /* 確保分頁控制不會超出其實際內容區域 */
    width: fit-content !important;
    margin: 0 auto !important; /* 置中顯示分頁控制 */
}

/* 頁面標題顏色自定義 - 使用更高權重的選擇器 */
/* 主標題使用完整的主題色 */
main > .d-flex.justify-content-between.align-items-center.mb-3 h1.h3 {
    color: var(--tr-primary) !important;
}

/* 副標題使用帶有 70% 透明度的主題色，以達到柔和、退後的效果 */
main > .d-flex.justify-content-between.align-items-center.mb-3 p.text-muted {
    color: rgba(74, 144, 226, 0.7) !important;
}
:root {
    --header-height: 64px;
    --footer-height: 52px;
}

.app-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: var(--header-height);
    z-index: 1030;
}

.app-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: var(--footer-height);
    z-index: 1030;
}

/* 語言選擇器層級設定 - 確保在所有內容之上 */
#language-switcher {
    position: relative;
    z-index: 1070 !important;
    pointer-events: auto !important;
}

#language-switcher .dropdown,
#language-switcher .dropdown-toggle,
#language-switcher .dropdown-menu {
    z-index: 1075 !important;
    pointer-events: auto !important;
}

/* 確保語言選擇器在 Test Case Management 頁面可點擊 */
.app-footer #language-switcher {
    z-index: 1070 !important;
    pointer-events: auto !important;
}

.app-main {
    min-height: calc(100vh - var(--header-height) - var(--footer-height));
    padding-top: calc(var(--header-height) + 8px);
    padding-bottom: calc(var(--footer-height) + 8px);
    overflow: auto;
}

/* Sticky table header within scroll containers */
.table-sticky thead th {
    position: sticky;
    top: 0;
    background-color: var(--bs-body-bg, #fff);
    z-index: 2;
}

/* Inline clear button inside inputs */
.input-clear-btn {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    border: none;
    background: transparent;
    color: #6c757d;
    padding: 0;
    line-height: 1;
}
.input-clear-btn:hover {
    color: #495057;
}

/* Seamless input + button in search group */
.input-group-search .position-relative .form-control {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
    border-right: 0;
}
.input-group-search .btn {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}
/* Apply focus ring to the whole search group, not the button */
.input-group-search:focus-within {
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    border-radius: 0.375rem;
}
/* Remove extra focus shadow from the button itself */
.input-group-search .btn:focus,
.input-group-search .btn:focus-visible {
    box-shadow: none;
    outline: none;
}

/* Status badge (slightly larger with more padding) */
.badge-status-lg {
    font-size: 0.75rem;
    padding: 0.45em 0.7em;
}

/* 團隊名稱標籤樣式 */
#team-name-badge {
    transition: all 0.2s ease;
    border-radius: 12px;
    padding: 0.25rem 0.5rem;
    font-weight: 500;
}

#team-name-badge:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* 響應式設計 */
@media (max-width: 768px) {
    #team-name-badge {
        font-size: 0.7rem !important;
        padding: 0.2rem 0.4rem !important;
    }

    #team-name-badge .fas {
        display: none;
    }
}

/* TCG Hover Tooltip 樣式 - 統一設計 */
#tcg-tooltip-content {
    position: fixed;
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    padding: 0;
    width: 360px;
    z-index: 1070;
    pointer-events: auto;
    overflow: hidden;
    display: none;
}

.tcg-tooltip-content {
    width: 100%;
    word-wrap: break-word;
}

.tcg-tooltip-content .tcg-tooltip-header {
    background: #f8fafc;
    padding: 12px 16px;
    border-bottom: 1px solid #e2e8f0;
    margin: 0;
}

.tcg-tooltip-content .tcg-ticket-info {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.tcg-tooltip-content .tcg-ticket-number {
    font-weight: 600;
    color: #1e40af;
    font-size: 0.9rem;
}

.tcg-tooltip-content .tcg-ticket-status {
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.tcg-tooltip-content .tcg-ticket-content {
    padding: 14px 16px;
}

.tcg-tooltip-content .tcg-ticket-title {
    font-size: 0.95rem;
    font-weight: 500;
    color: #1f2937;
    margin-bottom: 12px;
    line-height: 1.4;
}

.tcg-tooltip-content .tcg-ticket-meta {
    display: grid;
    gap: 8px;
}

.tcg-tooltip-content .tcg-assignee,
.tcg-tooltip-content .tcg-priority {
    display: flex;
    align-items: center;
}

.tcg-tooltip-content .tcg-label {
    font-size: 0.8rem;
    color: #6b7280;
    font-weight: 500;
    min-width: 65px;
    margin-right: 8px;
}

.tcg-tooltip-content .tcg-value {
    font-size: 0.8rem;
    color: #374151;
    font-weight: 400;
}

.tcg-tooltip-content .tcg-tooltip-footer {
    background: #f8fafc;
    padding: 10px 16px;
    border-top: 1px solid #e2e8f0;
    margin: 0;
}

.tcg-tooltip-content .tcg-jira-link {
    display: inline-flex;
    align-items: center;
    color: #3b82f6;
    text-decoration: none;
    font-size: 0.8rem;
    font-weight: 500;
    transition: color 0.15s ease;
}

.tcg-tooltip-content .tcg-jira-link:hover {
    color: #1d4ed8;
    text-decoration: underline;
}

@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* TCG tag hover 效果增強 */
.tcg-tag {
    transition: all 0.2s ease;
    cursor: help;
}

.tcg-tag:hover {
    background-color: #e3f2fd !important;
    border-color: #2196f3 !important;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(33, 150, 243, 0.2);
}

/* Fun loading animation (compact, same line-height impression) */
.fun-loader {
    width: 220px;
    height: 28px;
    position: relative;
}
.fun-track {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
}
.fun-ground {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 2px;
    height: 2px;
    background: repeating-linear-gradient(
        90deg,
        #cfd6de 0 12px,
        #e7ecf2 12px 24px
    );
}
.fun-runner {
    position: absolute;
    bottom: 6px;
    left: -32px;
    font-size: 18px;
    animation: runAcross 2.2s linear infinite;
}
@keyframes runAcross {
    from {
        left: -32px;
    }
    to {
        left: calc(100% + 32px);
    }
}
.fun-dot {
    position: absolute;
    bottom: 9px;
    left: -16px;
    width: 10px;
    height: 10px;
    background: var(--tr-primary, #4a90e2);
    border-radius: 50%;
    animation: runAcross 2.2s linear infinite;
    opacity: 0.85;
}

/* 版本更新按鈕樣式 */
#version-update-btn {
    position: relative;
    overflow: hidden;
    border: var(--btn-border-width) solid var(--btn-info-border);
    color: var(--btn-info-border);
    background: transparent;
    transition: all 0.3s ease;
}

#version-update-btn:hover {
    background: var(--btn-info-hover-bg);
    border-color: var(--btn-info-hover-border);
    color: var(--btn-info-hover-color);
    transform: translateY(-1px);
    box-shadow: var(--btn-info-shadow);
}

#version-update-btn:focus,
#version-update-btn:active {
    background: var(--btn-info-active-bg);
    border-color: var(--btn-info-active-border);
    color: #ffffff;
    box-shadow: var(--btn-info-shadow);
}

/* 不刺眼的緩慢閃爍動畫 */
.version-update-pulse {
    animation: versionPulse 3s ease-in-out infinite;
}

@keyframes versionPulse {
    0%,
    100% {
        opacity: 1;
        box-shadow: 0 0 0 rgba(91, 192, 222, 0);
    }
    50% {
        opacity: 0.8;
        box-shadow: 0 0 10px rgba(91, 192, 222, 0.4);
    }
}

/* 避免動畫過於頻繁影響用戶體驗 */
.version-update-pulse:hover {
    animation: none;
}

/* Team card dropdown layering fix - 讓下拉選單顯示在其他卡片之上 */
.team-card {
    position: relative;
    z-index: 1;
}

.team-card.dropdown-open {
    z-index: 1200;
}

.team-card .dropdown-menu {
    z-index: 1200;
}
